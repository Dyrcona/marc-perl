<HTML>
<HEAD>
<TITLE>MARC::XML - A subclass of MARC.pm to provide XML support.</TITLE>
<LINK REV="made" HREF="mailto:root@porky.devel.redhat.com">
</HEAD>

<BODY>

<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#NAME">NAME</A>
	<LI><A HREF="#SYNOPSIS">SYNOPSIS</A>
	<LI><A HREF="#DESCRIPTION">DESCRIPTION</A>
	<UL>

		<LI><A HREF="#Downloading_and_Intalling">Downloading and Intalling</A>
		<LI><A HREF="#Todo">Todo</A>
		<LI><A HREF="#Web_Interface">Web Interface</A>
		<LI><A HREF="#Sample_XML_file">Sample XML file</A>
	</UL>

	<LI><A HREF="#METHODS">METHODS</A>
	<UL>

		<LI><A HREF="#new_">new()</A>
		<LI><A HREF="#output_">output()</A>
	</UL>

	<LI><A HREF="#NOTES">NOTES</A>
	<LI><A HREF="#EXAMPLES">EXAMPLES</A>
	<LI><A HREF="#AUTHORS">AUTHORS</A>
	<LI><A HREF="#SEE_ALSO">SEE ALSO</A>
	<LI><A HREF="#COPYRIGHT">COPYRIGHT</A>
</UL>
<!-- INDEX END -->

<HR>
<P>
<HR>
<H1><A NAME="NAME">NAME</A></H1>
<P>
MARC::XML - A subclass of MARC.pm to provide XML support.

<P>
<HR>
<H1><A NAME="SYNOPSIS">SYNOPSIS</A></H1>
<P>
<PRE>    use MARC::XML;
</PRE>
<P>
<PRE>    #read in some MARC and output some XML
    $myobject = MARC::XML-&gt;new(&quot;marc.mrc&quot;,&quot;usmarc&quot;);
    $myobject-&gt;output({file=&gt;&quot;&gt;marc.xml&quot;,format=&gt;&quot;xml&quot;});
</PRE>
<P>
<PRE>    #read in some XML and output some MARC
    $myobject = MARC::XML-&gt;new(&quot;marc.xml&quot;,&quot;xml&quot;);
    $myobject-&gt;output({file=&gt;&quot;&gt;marc.mrc&quot;,&quot;usmarc&quot;);
</PRE>
<P>
<HR>
<H1><A NAME="DESCRIPTION">DESCRIPTION</A></H1>
<P>
MARC::XML is a subclass of MARC.pm which provides methods for round-trip
conversions between MARC and XML. MARC::XML requires that you have the CPAN
modules MARC.pm and XML::Parser installed in your Perl library. Version
1.04 of MARC.pm and 2.27 of XML::Parser (or later) are required. As a
subclass of MARC.pm a MARC::XML object will by default have the full
functionality of a MARC.pm object. See the MARC.pm documentation for
details.

<P>
The XML file that is read and generated by MARC::XML is not associated with
a Document Type Definition (DTD). This means that your files need to be
well-formed, but they will not be validated. When performing XML-&gt;MARC
conversion it is important that the XML file is structured in a particular
way. Fortunately, this is the same format that is generated by the
MARC-&gt;XML conversion, so you should be able to be able to move your data
easily between the two formats.

<P>
<HR>
<H2><A NAME="Downloading_and_Intalling">Downloading and Intalling</A></H2>
<DL>
<DT><STRONG><A NAME="item_Download">Download</A></STRONG><DD>
<P>
First make sure that you have <STRONG>MARC.pm</STRONG> and <STRONG>XML::Parser</STRONG> installed. Both Perl extensions are available from the CPAN <A
HREF="http://www.cpan.org/modules/by-module,">http://www.cpan.org/modules/by-module,</A>
and they must be available in your Perl library for MARC::XML to work
properly.

<P>
MARC::XML is provided in standard CPAN distribution format. Download the
latest version from <A
HREF="http://www.cpan.org/modules/by-module/MARC/XML.">http://www.cpan.org/modules/by-module/MARC/XML.</A>
It will extract into a directory MARC-XML-version with any necessary
subdirectories. Once you have extracted the archive Change into the
MARC-XML top directory and execute the following command depending on your
platform.

<DT><STRONG><A NAME="item_Unix">Unix</A></STRONG><DD>
<P>
<PRE>    perl Makefile.PL
    make
    make test
    make install
</PRE>
<DT><STRONG><A NAME="item_Win9x">Win9x/WinNT/Win2000</A></STRONG><DD>
<P>
<PRE>    perl Makefile.PL
    perl test.pl
    perl install.pl
</PRE>
<DT><STRONG><A NAME="item_Test">Test</A></STRONG><DD>
<P>
Once you have installed, you can check if Perl can find it. Change to some
other directory and execute from the command line:

<P>
<PRE>    perl -e &quot;use MARC::XML&quot;
</PRE>
<P>
If you <STRONG>do not</STRONG> get any response that means everything is OK! If you get an error like <EM>Can't locate method "use" via package MARC::XML</EM>. then Perl is not able to find MARC::XML--double check that the file
copied it into the right place during the install.

</DL>
<P>
<HR>
<H2><A NAME="Todo">Todo</A></H2>
<UL>
<LI>
<P>
Checking for field and record lengths to make sure that data read in from
an XML file does not exceed the limited space available in a MARC record.

<LI>
<P>
Support for MARC &lt;-&gt; Unicode character conversions.

<LI>
<P>
MARC &lt;-&gt; EAD (Encoded Archival Description) conversion?

<LI>
<P>
Support for MARC &lt;-&gt; DC/RDF (Dublin Core Metadata encoded in the Resource Description
Framework)?

<LI>
<P>
Support for MARC &lt;-&gt; FGDC Metadata (Federal Geographic Data Committee) conversion?

</UL>
<P>
<HR>
<H2><A NAME="Web_Interface">Web Interface</A></H2>
<P>
A web interface to MARC.pm and MARC::XML is available at <A
HREF="http://libstaff.lib.odu.edu/cgi-bin/marc.cgi">http://libstaff.lib.odu.edu/cgi-bin/marc.cgi</A>
where you can upload records and observe the results. If you'd like to
check out the cgi script take a look at <A
HREF="http://libstaff.lib.odu.edu/depts/systems/iii/scripts/MARCpm/marc-cgi.txt">http://libstaff.lib.odu.edu/depts/systems/iii/scripts/MARCpm/marc-cgi.txt</A>
However, to get the full functionality you will want to install MARC.pm and
MARC::XML on your server or PC.

<P>
<HR>
<H2><A NAME="Sample_XML_file">Sample XML file</A></H2>
<P>
Below is an example of the flavor of XML that MARC::XML will generate and
read. There are only four elements: the <EM>&lt;marc&gt;</EM> pair that serves as the root for the file; the <EM>&lt;record&gt;</EM> pair that encloses each record; the <EM>&lt;field&gt;</EM> pair which encloses each field; and the
<EM>&lt;subfield&gt;</EM> pair which encloses each subfield. In addition the
<EM>&lt;field&gt;</EM> and <EM>&lt;subfield&gt;</EM> tags have three possible attributes: <EM>type</EM> which defines the specific tag or subfield ; as well as
<EM>i1</EM> and <EM>i2</EM> which allow you to define the indicators for a specific tag.

<P>
<PRE>   &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
</PRE>
<P>
<PRE>   &lt;marc&gt;
</PRE>
<P>
<PRE>   &lt;record&gt;
   &lt;field type=&quot;000&quot;&gt;00901cam  2200241Ia 45e0&lt;/field&gt;
   &lt;field type=&quot;001&quot;&gt;ocm01047729 &lt;/field&gt;
   &lt;field type=&quot;003&quot;&gt;OCoLC&lt;/field&gt;
   &lt;field type=&quot;005&quot;&gt;19990808143752.0&lt;/field&gt;
   &lt;field type=&quot;008&quot;&gt;741021s1884    enkaf         000 1 eng d&lt;/field&gt;
   &lt;field type=&quot;040&quot; i1=&quot; &quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;KSU&lt;/subfield&gt;
      &lt;subfield type=&quot;c&quot;&gt;KSU&lt;/subfield&gt;
      &lt;subfield type=&quot;d&quot;&gt;GZM&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;090&quot; i1=&quot; &quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;PS1305&lt;/subfield&gt;
      &lt;subfield type=&quot;b&quot;&gt;.A1 1884&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;049&quot; i1=&quot; &quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;VODN&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;100&quot; i1=&quot;1&quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;Twain, Mark,&lt;/subfield&gt;
      &lt;subfield type=&quot;d&quot;&gt;1835-1910.&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;245&quot; i1=&quot;1&quot; i2=&quot;4&quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;The adventures of Huckleberry Finn :&lt;/subfield&gt;
      &lt;subfield type=&quot;b&quot;&gt;(Tom Sawyer's comrade) : scene, the Mississippi Valley : time, forty to fifty years ago /&lt;/subfield&gt;
      &lt;subfield type=&quot;c&quot;&gt;by Mark Twain (Samuel Clemens) ; with 174 illustrations.&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;260&quot; i1=&quot; &quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;London :&lt;/subfield&gt;
      &lt;subfield type=&quot;b&quot;&gt;Chatto &amp;amp; Windus,&lt;/subfield&gt;
      &lt;subfield type=&quot;c&quot;&gt;1884.&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;300&quot; i1=&quot; &quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;xvi, 438 p., [1] leaf of plates :&lt;/subfield&gt;
      &lt;subfield type=&quot;b&quot;&gt;ill. ;&lt;/subfield&gt;
      &lt;subfield type=&quot;c&quot;&gt;20 cm.&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;500&quot; i1=&quot; &quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;First English ed.&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;500&quot; i1=&quot; &quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;State B; gatherings saddle-stitched with wire staples.&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;500&quot; i1=&quot; &quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;Advertisements on p. [1]-32 at end.&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;500&quot; i1=&quot; &quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;Bound in red S cloth; stamped in black and gold.&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;510&quot; i1=&quot;4&quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;BAL&lt;/subfield&gt;
      &lt;subfield type=&quot;c&quot;&gt;3414.&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;740&quot; i1=&quot;0&quot; i2=&quot;1&quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;Huckleberry Finn.&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;field type=&quot;994&quot; i1=&quot; &quot; i2=&quot; &quot;&gt;
      &lt;subfield type=&quot;a&quot;&gt;E0&lt;/subfield&gt;
      &lt;subfield type=&quot;b&quot;&gt;VOD&lt;/subfield&gt;
   &lt;/field&gt;
   &lt;/record&gt;
</PRE>
<P>
<PRE>   &lt;/marc&gt;
</PRE>
<P>
<HR>
<H1><A NAME="METHODS">METHODS</A></H1>
<P>
Here is a list of methods available to you in MARC::XML.

<P>
<HR>
<H2><A NAME="new_">new()</A></H2>
<P>
MARC::XML overides MARC.pm's <CODE>new()</CODE> method to create a
MARC::XML object. Similar to MARC.pm's <CODE>new()</CODE> it can take two
arguments: a file name, and the format of the file to read in. However
MARC::XML's <CODE>new()</CODE> gives you an extra format choice ``XML''
(which is also the default). Internally, the XML source is converted to a
series of <STRONG>addfield()</STRONG> and <STRONG>createrecord()</STRONG>
calls. The order of MARC tags is preserved by default. But if an optional
third argument is passed to <CODE>new(),</CODE> it is used as the <EM>ordered</EM> option for the <STRONG>addfield()</STRONG> calls. Like MARC.pm, it is not possible to read only part of an XML input
file using <CODE>new().</CODE> Some examples:

<P>
<PRE>      #read in an XML file called myxmlfile.xml
   use MARC::XML;
   $x = MARC::XML-&gt;new(&quot;myxmlfile.xml&quot;,&quot;xml&quot;);
   $x = MARC::XML-&gt;new(&quot;needsort.xml&quot;,&quot;xml&quot;,&quot;y&quot;);
</PRE>
<P>
Since the full funtionality of MARC.pm is also available you can read in
other types of files as well. Although <CODE>new()</CODE> with no arguments
will create an object with no records, just like MARC.pm, XML format not
supported by <CODE>openmarc()</CODE> and <CODE>nextmarc()</CODE> for input.
The <CODE>openxml()</CODE> and <CODE>nextxml()</CODE> methods provide
similar operation. And you can output from XML to a different format
source.

<P>
<PRE>      #read in a MARC file called mymarcfile.mrc
   use MARC::XML;
   $x = MARC::XML-&gt;new(&quot;mymarcfile.mrc&quot;,&quot;usmarc&quot;); 
   $x = MARC::XML-&gt;new(); 
</PRE>
<P>
<HR>
<H2><A NAME="output_">output()</A></H2>
<P>
MARC::XML's <CODE>output()</CODE> method allows you to output the MARC
object as an XML file. It takes eight arguments: <EM>file</EM>, <EM>format</EM>, <EM>lineterm</EM>, and
<EM>records</EM> have the same function as in MARC.pm. If not specified, <EM>format</EM>
defaults to ``xml'' and <EM>lineterm</EM> defaults to ``\n''. A <EM>charset</EM> parameter accepts a hash-reference to a user supplied character translation
table. The internal default is based on the LoC ``register.sgm'' table
supplied with the LoC. SGML utilities. You can use the <STRONG>ansel_default</STRONG> method to get a hash-reference to it if you only want to modify a couple of
characters. See example below. The <EM>encoding</EM>, <EM>dtd_file</EM>, and <EM>standalone</EM> arguments correspond to the specified fields in an XML header. If not
specified,
<EM>standalone</EM> defaults to ``yes'' and <EM>encoding</EM> to ``US-ASCII''. If an optional
<EM>dtd_file</EM> is specified, a <STRONG>Document Type Declaration</STRONG> is added to the output to contain the data.

<P>
<PRE>   use MARC::XML;
   $x = MARC::XML-&gt;new(&quot;mymarcfile.mrc&quot;,&quot;usmarc&quot;);
   $x-&gt;output({file=&gt;&quot;&gt;myxmlfile.xml&quot;,format=&gt;&quot;xml&quot;});
</PRE>
<P>
Or if you only want to output the first record:

<P>
<PRE>   $x-&gt;output({file=&gt;&quot;&gt;myxmlfile.xml&quot;,format=&gt;&quot;xml&quot;,records=&gt;[1]});
</PRE>
<P>
If you like you can also output portions of the XML file using the <EM>format</EM> 
options: <EM>xml_header</EM>, <EM>xml_body</EM>, and <EM>xml_footer</EM>. Remember to prefix your file name with a &gt;&gt; to append though. This
example will output record 1 twice.

<P>
<PRE>   use MARC::XML;
   $x = MARC::XML-&gt;new(&quot;mymarcfile.mrc&quot;,&quot;usmarc&quot;);
   $x-&gt;output({file=&gt;&quot;&gt;myxmlfile.xml&quot;,format=&gt;&quot;xml_header&quot;});
   $x-&gt;output({file=&gt;&quot;&gt;&gt;myxmlfile.xml&quot;,format=&gt;&quot;xml_body&quot;,records=&gt;[1]});
   $x-&gt;output({file=&gt;&quot;&gt;&gt;myxmlfile.xml&quot;,format=&gt;&quot;xml_body&quot;,records=&gt;[1]});
   $x-&gt;output({file=&gt;&quot;&gt;&gt;myxmlfile.xml&quot;,foramt=&gt;&quot;xml_footer&quot;});
</PRE>
<P>
Instead of outputting to a file, you can also capture the output in a
variable if you wish.

<P>
<PRE>   use MARC::XML;
   $x = MARC::XML-&gt;new(&quot;mymarcfile.mrc&quot;,&quot;usmarc&quot;);
   $myxml = $x-&gt;output({format=&gt;&quot;xml&quot;});
</PRE>
<P>
As with <CODE>new()</CODE> the full functionality of MARC.pm's
<CODE>output()</CODE> method are available to you as well. So you could
read in an XML file and then output it as ascii text:

<P>
<PRE>   use MARC::XML;
   $x = MARC::XML-&gt;new(&quot;myxmlfile.xml&quot;,&quot;xml&quot;);
   $x-&gt;output({file=&gt;&quot;&gt;mytextfile.txt&quot;,&quot;ascii&quot;);
</PRE>
<P>
<HR>
<H1><A NAME="NOTES">NOTES</A></H1>
<P>
Please let us know if you run into any difficulties using MARC.pm--we'd be
happy to try to help. Also, please contact us if you notice any bugs, or if
you would like to suggest an improvement/enhancement. Email addresses are
listed at the bottom of this page.

<P>
Development of MARC.pm and other library oriented Perl utilities is
conducted on the Perl4Lib listserv. Perl4Lib is an open list and is an
ideal place to ask questions about MARC.pm. Subscription information is
available at <A
HREF="http://www.vims.edu/perl4lib">http://www.vims.edu/perl4lib</A>

<P>
Two global boolean variables are reserved for test and debugging. Both are
``0'' (off) by default. The <CODE>$XTEST</CODE> variable disables internal error messages generated using <EM>Carp</EM>. It should only be used in the automatic test suite. The <CODE>$XDEBUG</CODE> variable adds verbose diagnostic messages.

<P>
<HR>
<H1><A NAME="EXAMPLES">EXAMPLES</A></H1>
<P>
The <STRONG>eg</STRONG> subdirectory contains a few complete examples to get you started.

<P>
<HR>
<H1><A NAME="AUTHORS">AUTHORS</A></H1>
<P>
Chuck Bearden <A HREF="mailto:cbearden@rice.edu">cbearden@rice.edu</A>

<P>
Bill Birthisel <A
HREF="mailto:wcbirthisel@alum.mit.edu">wcbirthisel@alum.mit.edu</A>

<P>
Derek Lane <A HREF="mailto:dereklane@pobox.com">dereklane@pobox.com</A>

<P>
Charles McFadden <A HREF="mailto:chuck@vims.edu">chuck@vims.edu</A>

<P>
Ed Summers <A HREF="mailto:ed@cheetahmail.com">ed@cheetahmail.com</A>

<P>
<HR>
<H1><A NAME="SEE_ALSO">SEE ALSO</A></H1>
<P>
<CODE>perl(1),</CODE> MARC.pm, MARC <A
HREF="http://lcweb.loc.gov/marc">http://lcweb.loc.gov/marc</A> , XML <A
HREF="http://www.w3.org/xml">http://www.w3.org/xml</A> .

<P>
<HR>
<H1><A NAME="COPYRIGHT">COPYRIGHT</A></H1>
<P>
Copyright (C) 1999,2000, Bearden, Birthisel, Lane, McFadden, and Summers.
All rights reserved. This module is free software; you can redistribute it
and/or modify it under the same terms as Perl itself. 23 April 2000.
Portions Copyright (C) 1999,2000, Duke University, Lane.

</BODY>

</HTML>
